<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador en Línea</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <header>
        <h1>Bienvenido al Visualizador en Línea</h1>
        <input type="text" id="searchBar" placeholder="Buscar por CLAVE1K">
        <button onclick="buscarElemento()">Buscar</button>
    </header>

    <main>
        <div id="mapa"></div>
    </main>

    <footer>
        <p>&copy; 2025 Inygeo. Todos los derechos reservados.</p>
    </footer>

    <script>
        // Cargar la capa MALLA_TIJUANA_CARTAS1K_1.js desde layers
        var capaMalla;
        fetch('layers/MALLA_TIJUANA_CARTAS1K_1.js')
            .then(response => response.json())
            .then(data => {
                capaMalla = L.geoJSON(data, {
                    onEachFeature: function (feature, layer) {
                        layer.bindPopup("CLAVE1K: " + feature.properties.CLAVE1K);
                    }
                }).addTo(mapa);
            });

        function buscarElemento() {
            var claveBuscada = document.getElementById("searchBar").value;

            if (!claveBuscada) {
                alert("Por favor, ingrese una clave CLAVE1K para buscar.");
                return;
            }

            if (!capaMalla) {
                alert("Capa de malla no cargada.");
                return;
            }

            capaMalla.eachLayer(function (layer) {
                if (layer.feature.properties.CLAVE1K == claveBuscada) {
                    var coordenadas = layer.getBounds().getCenter();
                    mapa.setView(coordenadas, 15);  // Zoom al elemento encontrado
                    layer.openPopup();  // Muestra el popup con la información
                }
            });
        }
    </script>

    <script src="scripts/main.js"></script>
</body>
</html>
